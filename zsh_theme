precmd() {
  vcs_info
}

zstyle ':vcs_info:git*' formats '%b'

setopt PROMPT_SUBST

BRANCH_MARK='%{\ue0a0%}'
CHECKMARK=$'\u2714'
CROSSMARK=$'\u2718'
STATUS="%(?:%{$fg[green]%}$CHECKMARK:%{$fg[red]%}$CROSSMARK)"

scm_branch() {
  if [ -n "${vcs_info_msg_0_}" ]; then
    echo -n "${BRANCH_MARK} ${vcs_info_msg_0_}"
  fi
}

PROMPT='%n@%m:%{$fg[cyan]%}%~%{$reset_color%}%# ${STATUS} %{$reset_color%}'
RPROMPT='$(scm_branch) [%*]'
